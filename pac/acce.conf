# ==========================================
# Lotspeed 1Gbps + 166ms RTT 优化配置
# ==========================================

# --------- 调试开关 ----------
debug = 0

# --------- 网卡名称 ----------
param_dev = eth0

# ============ 基础参数 ============

# MSS 标准值
mss = 1460

# 初始窗口
# 1Gbps 高延迟环境，初始窗口要大
# 32 个 MSS ≈ 93KB，可以快速填充管道
min_win = 32

# ============ 时间与延迟参数 ============

# 定时器精度 (微秒)
# 1Gbps 高速环境，需要更快的调度响应
# 1ms 是个好的平衡点
delay_in_us = 1000

# 最小 RTT (微秒)
# 设为 1ms 以兼容 LAN 场景
# 如果纯 WAN 可以设为 50000 (50ms)
min_rtt = 166000

# 最大 RTT (微秒)
# 166ms 基础 + 允许 3 倍抖动
# 166 × 3 ≈ 500ms
max_rtt = 500000

# 最大排队延迟 (微秒)
# 2 个 RTT = 332ms
# 设为 330ms 留一点余量
max_delay = 330000

# ============ 核心流量控制参数 ============

# 发送缓冲区大小 (字节) [最关键参数]
#
# 计算过程:
#   BDP = 1Gbps × 166ms = 20.75 MB
#   buffer_size = BDP × 1. 5 = 31. 125 MB
#
# 设为 16MB (16777216 字节)
# 这决定了能跑满 500 Mbps 不要触碰 1Gbps 的上限
buffer_size = 3145728

# 最小包长度 (以太网最小帧)
min_pkt_len = 74

# ============ 算法平滑参数 ============

# 吞吐量平滑因子 (千分比)
# 800 = 0.8 × 旧值 + 0.2 × 新值
# 高延迟环境抖动大，稍微保守一点
throughput_smooth = 600

# RTT 平滑因子 (千分比)
# 900 = 0.9 × 旧值 + 0.1 × 新值
# RTT 相对稳定，可以更平滑
rtt_smooth = 750

# ============ 拥塞检测参数 ============

# 吞吐量下降阈值 (千分比)
# 500 = 吞吐量跌至 50% 时判定为拥塞
# 高延迟线路丢包率可能较高，设宽松一点
alpha = 500

# 连续下降次数阈值
# 连续 4 个 RTT 周期吞吐量持续下降才切换到拥塞避免
# 166ms × 5 ≈ 640+ms 的观察窗口
reduction_thresh = 4

# ============ 流分类参数 ============

# 优先流阈值 (字节)
# 10MB 以下为高优先级
# 覆盖大部分网页、API、小文件传输
prio_thresh = 12500000


# 慢启动阈值 (字节)
# 10MB 后从慢启动切换到拥塞避免
# 相当于约 0.8 秒填充管道后稳定发送
ss_thresh = 10485760